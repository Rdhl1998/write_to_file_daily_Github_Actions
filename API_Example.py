# -*- coding: utf-8 -*-
"""
Created on Wed Jul 10 10:22:50 2024

@author: rubenlui
"""

from datetime import datetime
'''
import requests 

api_url = "https://api.metalpriceapi.com/v1/latest?api_key="
response = requests.get(api_url)
data = response.json()
'''

x = {"success":'true',"base":"USD","timestamp":1720569599,"rates":{"AED":3.672997,"AFN":71.112548,"ALL":92.643026,"AMD":388.1223314465,"ANG":1.802799,"AOA":872.499758,"ARS":917.203416,"AUD":1.4825027612,"AZN":1.708119,"BAM":1.806493,"BBD":2.019766,"BDT":117.535688,"BGN":1.8061675,"BHD":0.3769205,"BIF":2879.4181235,"BND":1.3501115,"BOB":6.911742,"BRL":5.471902,"BSD":1.0003215,"BTC":0.0000176348,"BTN":83.511292,"BYN":3.27308,"BZD":2.016349,"CAD":1.36305,"CDF":2864.999849,"CHF":0.897725,"CLF":0.034066,"CLP":939.98995,"CNY":7.268036528,"COP":4066.5,"CRC":534.7989365,"CVE":101.8453419524,"CZK":23.25195,"DJF":178.1091345,"DKK":6.886199,"DOP":59.14191,"DZD":134.1981715,"EGP":47.929797,"ERN":15,"ETB":57.773894,"ETH":0.000331226,"EUR":0.923185,"FJD":2.2537641282,"FKP":0.784602,"GBP":0.780315,"GEL":2.739987,"GHS":15.379855,"GIP":0.784602,"GMD":67.7654770565,"GNF":8614.049431,"GTQ":7.7725975,"GYD":209.282778,"HKD":7.809865,"HNL":24.774398,"HRK":7.018438,"HTG":132.2280615,"HUF":364.413501,"IDR":16283.5,"ILS":3.686795,"INR":83.46385,"IQD":1310.397894,"IRR":42087.4984385,"ISK":137.6498545,"JMD":156.717157,"JOD":0.7087054073,"JPY":160.806027,"KES":127.5402535,"KGS":85.766701,"KHR":4120.062325,"KMF":454.500178,"KRW":1381.989737,"KWD":0.30603,"KYD":0.833603,"KZT":480.201358,"LAK":22106.8837045,"LBP":89577.8887955,"LKR":304.595103,"LRD":194.458043,"LSL":18.1609005,"LYD":4.86122,"MAD":9.8639425,"MDL":17.8007835,"MGA":4481.598042,"MKD":56.7966885,"MMK":3247.960496,"MNT":3450.000098,"MOP":8.047654347,"MRO":198.314914,"MUR":46.760014,"MVR":15.459618,"MWK":1733.8938435,"MXN":17.99134,"MYR":4.7105015,"MZN":63.69504,"NAD":18.1609005,"NGN":1550.7199455,"NIO":36.8170845,"NOK":10.60401,"NPR":133.618218,"NZD":1.630789151,"OMR":0.384951,"PAB":1.0003215,"PEN":3.7952225,"PHP":58.536498,"PKR":278.5869005,"PLN":3.940604,"PYG":7541.6800685,"QAR":3.648731,"RON":4.592198,"RSD":108.040171,"RUB":87.254515,"RWF":1312.8898345,"SAR":3.7509215,"SCR":13.8170175,"SDG":601.000134,"SEK":10.582585,"SGD":1.34927,"SLL":20969.501917,"SOS":571.6529445,"SRD":30.200504,"STN":22.6574367759,"SVC":8.752599,"SZL":18.154514,"THB":36.3925,"TJS":10.653302,"TMT":3.5,"TND":3.1088515,"TOP":2.354251,"TRY":32.72077,"TTD":6.7731975,"TWD":32.487997,"TZS":2655.7991365,"UAH":40.734016,"UGX":3711.262014,"USDAED":0.272257233,"USDAFN":0.0140622159,"USDALL":0.0107941206,"USDAMD":0.0025765072,"USDANG":0.5546930079,"USDAOA":0.0011461321,"USDARS":0.0010902707,"USDAUD":0.674535,"USDAZN":0.5854393049,"USDBAM":0.5535587461,"USDBBD":0.4951068589,"USDBDT":0.0085080542,"USDBGN":0.5536585062,"USDBHD":2.6530793629,"USDBIF":0.0003472924,"USDBND":0.7406795661,"USDBOB":0.1446813264,"USDBRL":0.182751811,"USDBSD":0.9996786033,"USDBTC":56706.0584752875,"USDBTN":0.0119744286,"USDBYN":0.305522627,"USDBZD":0.4959458903,"USDCAD":0.7336488023,"USDCDF":0.0003490402,"USDCHF":1.1139268707,"USDCLF":29.354781894,"USDCLP":0.0010638412,"USDCNY":0.1375887416,"USDCOP":0.0002459117,"USDCRC":0.0018698616,"USDCVE":0.0098188094,"USDCZK":0.0430071456,"USDDJF":0.0056145352,"USDDKK":0.1452179933,"USDDOP":0.0169084833,"USDDZD":0.0074516664,"USDEGP":0.020863848,"USDERN":0.0666666667,"USDETB":0.0173088558,"USDETH":3019.0866659018,"USDEUR":1.0832065079,"USDFJD":0.4437021548,"USDFKP":1.2745315459,"USDGBP":1.2815337396,"USDGEL":0.3649652352,"USDGHS":0.0650201189,"USDGIP":1.2745315459,"USDGMD":0.0147567765,"USDGNF":0.0001160894,"USDGTQ":0.1286571188,"USDGYD":0.004778224,"USDHKD":0.1280431864,"USDHNL":0.0403642502,"USDHRK":0.1424818457,"USDHTG":0.0075626912,"USDHUF":0.0027441354,"USDIDR":0.0000614119,"USDILS":0.2712382978,"USDINR":0.011981235,"USDIQD":0.000763127,"USDIRR":0.00002376,"USDISK":0.0072648097,"USDJMD":0.0063809223,"USDJOD":1.4110235222,"USDJPY":0.0062186724,"USDKES":0.0078406619,"USDKGS":0.0116595367,"USDKHR":0.0002427148,"USDKMF":0.0022002192,"USDKRW":0.0007235944,"USDKWD":3.267653498,"USDKYD":1.1996118056,"USDKZT":0.0020824598,"USDLAK":0.0000452348,"USDLBP":0.0000111635,"USDLKR":0.0032830469,"USDLRD":0.0051424975,"USDLSL":0.0550633489,"USDLYD":0.2057096778,"USDMAD":0.101379342,"USDMDL":0.0561773025,"USDMGA":0.0002231347,"USDMKD":0.0176066603,"USDMMK":0.0003078855,"USDMNT":0.0002898551,"USDMOP":0.12425981,"USDMRO":0.0050424851,"USDMUR":0.0213857934,"USDMVR":0.0646846513,"USDMWK":0.0005767366,"USDMXN":0.0555822968,"USDMYR":0.2122916212,"USDMZN":0.0156998096,"USDNAD":0.0550633489,"USDNGN":0.0006448618,"USDNIO":0.0271613033,"USDNOK":0.0943039473,"USDNPR":0.0074840094,"USDNZD":0.6132000568,"USDOMR":2.597733218,"USDPAB":0.9996786033,"USDPEN":0.263489163,"USDPHP":0.0170833588,"USDPKR":0.0035895442,"USDPLN":0.2537682041,"USDPYG":0.0001325964,"USDQAR":0.2740678883,"USDRON":0.2177606453,"USDRSD":0.0092558165,"USDRUB":0.011460725,"USDRWF":0.0007616785,"USDSAR":0.2666011539,"USDSCR":0.0723745193,"USDSDG":0.0016638931,"USDSEK":0.0944948706,"USDSGD":0.7411415061,"USDSLL":0.0000476883,"USDSOS":0.0017493131,"USDSRD":0.0331120302,"USDSTN":0.0441356191,"USDSVC":0.1142517782,"USDSZL":0.0550827194,"USDTHB":0.0274781892,"USDTJS":0.0938676102,"USDTMT":0.2857142857,"USDTND":0.3216621958,"USDTOP":0.4247635448,"USDTRY":0.030561628,"USDTTD":0.1476407561,"USDTWD":0.0307805988,"USDTZS":0.0003765345,"USDUAH":0.0245495067,"USDUGX":0.0002694501,"USDUYU":0.0250092403,"USDUZS":0.0000793149,"USDVES":0.0274398123,"USDVND":0.0000393391,"USDVUV":0.0084230405,"USDXAF":0.0016504892,"USDXAG":30.8674883481,"USDXAU":2362.5777140407,"USDXCD":0.3700207693,"USDXOF":0.0016504892,"USDXPD":1018.160418301,"USDXPF":0.0090780497,"USDXPT":1012.1732046983,"USDXRP":0.4309850516,"USDYER":0.0039940093,"USDZAR":0.0552416754,"USDZMK":0.0001110963,"USDZMW":0.0405958035,"UYU":39.985221,"UZS":12607.9763545,"VES":36.443398,"VND":25420,"VUV":118.721975,"XAF":605.88097,"XAG":0.0323965458,"XAU":0.0004232665,"XCD":2.702551,"XOF":605.88097,"XPD":0.0009821635,"XPF":110.1558185,"XPT":0.0009879732,"XRP":2.3202660887,"YER":250.3749815,"ZAR":18.102275,"ZMK":9001.19822,"ZMW":24.633088}}
time = datetime.utcfromtimestamp(x['timestamp']).strftime('%Y-%m-%d')
rates = x['rates']
list = ['USDXAG','USDXPT','USDXAU','EUR','RUB','GEL','PLN','OMR','INR','GBP','DKK','CZK','USDETH','USDBTC','JPY','CHF','CNY']
counter = 0
for i in rates:
    if i in list:
        print(time,',',i,',',float(rates[i]))
        counter += 1
print(counter)